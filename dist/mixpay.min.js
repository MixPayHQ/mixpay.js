/*!
 * mixpayjs v1.0.0
 * https://MixPayHQ.github.io/mixpayjs
 *
 * Copyright 2022 gypsophila@mathunion.xyz
 * Released under the MIT license
 *
 * Date: 2022-04-21T09:32:52.716Z
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).MixPay=e()}(this,function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function $(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var s,i,o=[],r=!0,a=!1;try{for(n=n.call(t);!(r=(s=n.next()).done)&&(o.push(s.value),!e||o.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{r||null==n.return||n.return()}finally{if(a)throw i}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s}var o={apiUrl:"https://api.mixpay.me/v1",isModal:!0,hasMask:!0,onReady:null,onPaymentCreate:null,onPaymentSuccess:null,onPaymentFail:null},r={clientId:"",expireSeconds:240,isChain:!1,note:"",payeeId:"",paymentAssetId:"",quoteAmount:"",quoteAssetId:"",remark:"",settlementAssetId:"",settlementMemo:"",settlementMethod:"mixin",traceId:""},h="--mixpay",t="undefined"!=typeof window&&void 0!==window.document,n=t?window:{},R=!!(n.webkit&&n.webkit.messageHandlers&&n.webkit.messageHandlers.MixinContext||n.MixinContext&&n.MixinContext.getContext),a="ready",c="close",l="create",u="success",d="error",p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function f(t,e){return t(e={exports:{}},e.exports),e.exports}var m,v,N=(P=Object.freeze({__proto__:null,default:{}}))&&P.default||P,H=f(function(t,e){t.exports=function(l){var s;if("undefined"!=typeof window&&window.crypto&&(s=window.crypto),"undefined"!=typeof self&&self.crypto&&(s=self.crypto),!(s=!(s=!(s="undefined"!=typeof globalThis&&globalThis.crypto?globalThis.crypto:s)&&"undefined"!=typeof window&&window.msCrypto?window.msCrypto:s)&&void 0!==p&&p.crypto?p.crypto:s))try{s=N}catch(t){}var n=Object.create||function(t){return e.prototype=t,t=new e,e.prototype=null,t};function e(){}var t={},i=t.lib={},o=i.Base={extend:function(t){var e=n(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),(e.init.prototype=e).$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},u=i.WordArray=o.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||a).stringify(this)},concat:function(t){var e=this.words,n=t.words,s=this.sigBytes,i=t.sigBytes;if(this.clamp(),s%4)for(var o=0;o<i;o++){var r=n[o>>>2]>>>24-o%4*8&255;e[s+o>>>2]|=r<<24-(s+o)%4*8}else for(var a=0;a<i;a+=4)e[s+a>>>2]=n[a>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,e=this.sigBytes;t[e>>>2]&=4294967295<<32-e%4*8,t.length=l.ceil(e/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(function(){if(s){if("function"==typeof s.getRandomValues)try{return s.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof s.randomBytes)try{return s.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")}());return new u.init(e,t)}}),r=t.enc={},a=r.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,s=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;s.push((o>>>4).toString(16)),s.push((15&o).toString(16))}return s.join("")},parse:function(t){for(var e=t.length,n=[],s=0;s<e;s+=2)n[s>>>3]|=parseInt(t.substr(s,2),16)<<24-s%8*4;return new u.init(n,e/2)}},c=r.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,s=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;s.push(String.fromCharCode(o))}return s.join("")},parse:function(t){for(var e=t.length,n=[],s=0;s<e;s++)n[s>>>2]|=(255&t.charCodeAt(s))<<24-s%4*8;return new u.init(n,e)}},h=r.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},d=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=h.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var e,n=this._data,s=n.words,i=n.sigBytes,o=this.blockSize,r=i/(4*o),a=(r=t?l.ceil(r):l.max((0|r)-this._minBufferSize,0))*o,t=l.min(4*a,i);if(a){for(var c=0;c<a;c+=o)this._doProcessBlock(s,c);e=s.splice(0,a),n.sigBytes-=t}return new u.init(e,t)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),f=(i.Hasher=d.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(n){return function(t,e){return new n.init(e).finalize(t)}},_createHmacHelper:function(n){return function(t,e){return new f.HMAC.init(n,e).finalize(t)}}}),t.algo={});return t}(Math)}),j=f(function(t,e){t.exports=function(t){for(var u=Math,e=t,n=e.lib,s=n.WordArray,i=n.Hasher,o=e.algo,I=[],r=0;r<64;r++)I[r]=u.abs(u.sin(r+1))*4294967296|0;var a=o.MD5=i.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var s=e+n;var i=t[s];t[s]=(i<<8|i>>>24)&16711935|(i<<24|i>>>8)&4278255360}var o=this._hash.words;var r=t[e+0];var a=t[e+1];var c=t[e+2];var l=t[e+3];var u=t[e+4];var h=t[e+5];var d=t[e+6];var f=t[e+7];var p=t[e+8];var m=t[e+9];var v=t[e+10];var y=t[e+11];var _=t[e+12];var g=t[e+13];var w=t[e+14];var b=t[e+15];var k=o[0];var A=o[1];var S=o[2];var M=o[3];k=C(k,A,S,M,r,7,I[0]);M=C(M,k,A,S,a,12,I[1]);S=C(S,M,k,A,c,17,I[2]);A=C(A,S,M,k,l,22,I[3]);k=C(k,A,S,M,u,7,I[4]);M=C(M,k,A,S,h,12,I[5]);S=C(S,M,k,A,d,17,I[6]);A=C(A,S,M,k,f,22,I[7]);k=C(k,A,S,M,p,7,I[8]);M=C(M,k,A,S,m,12,I[9]);S=C(S,M,k,A,v,17,I[10]);A=C(A,S,M,k,y,22,I[11]);k=C(k,A,S,M,_,7,I[12]);M=C(M,k,A,S,g,12,I[13]);S=C(S,M,k,A,w,17,I[14]);A=C(A,S,M,k,b,22,I[15]);k=L(k,A,S,M,a,5,I[16]);M=L(M,k,A,S,d,9,I[17]);S=L(S,M,k,A,y,14,I[18]);A=L(A,S,M,k,r,20,I[19]);k=L(k,A,S,M,h,5,I[20]);M=L(M,k,A,S,v,9,I[21]);S=L(S,M,k,A,b,14,I[22]);A=L(A,S,M,k,u,20,I[23]);k=L(k,A,S,M,m,5,I[24]);M=L(M,k,A,S,w,9,I[25]);S=L(S,M,k,A,l,14,I[26]);A=L(A,S,M,k,p,20,I[27]);k=L(k,A,S,M,g,5,I[28]);M=L(M,k,A,S,c,9,I[29]);S=L(S,M,k,A,f,14,I[30]);A=L(A,S,M,k,_,20,I[31]);k=q(k,A,S,M,h,4,I[32]);M=q(M,k,A,S,p,11,I[33]);S=q(S,M,k,A,y,16,I[34]);A=q(A,S,M,k,w,23,I[35]);k=q(k,A,S,M,a,4,I[36]);M=q(M,k,A,S,u,11,I[37]);S=q(S,M,k,A,f,16,I[38]);A=q(A,S,M,k,v,23,I[39]);k=q(k,A,S,M,g,4,I[40]);M=q(M,k,A,S,r,11,I[41]);S=q(S,M,k,A,l,16,I[42]);A=q(A,S,M,k,d,23,I[43]);k=q(k,A,S,M,m,4,I[44]);M=q(M,k,A,S,_,11,I[45]);S=q(S,M,k,A,b,16,I[46]);A=q(A,S,M,k,c,23,I[47]);k=x(k,A,S,M,r,6,I[48]);M=x(M,k,A,S,f,10,I[49]);S=x(S,M,k,A,w,15,I[50]);A=x(A,S,M,k,h,21,I[51]);k=x(k,A,S,M,_,6,I[52]);M=x(M,k,A,S,l,10,I[53]);S=x(S,M,k,A,v,15,I[54]);A=x(A,S,M,k,a,21,I[55]);k=x(k,A,S,M,p,6,I[56]);M=x(M,k,A,S,b,10,I[57]);S=x(S,M,k,A,d,15,I[58]);A=x(A,S,M,k,g,21,I[59]);k=x(k,A,S,M,u,6,I[60]);M=x(M,k,A,S,y,10,I[61]);S=x(S,M,k,A,c,15,I[62]);A=x(A,S,M,k,m,21,I[63]);o[0]=o[0]+k|0;o[1]=o[1]+A|0;o[2]=o[2]+S|0;o[3]=o[3]+M|0},_doFinalize:function(){var t=this._data;var e=t.words;var n=this._nDataBytes*8;var s=t.sigBytes*8;e[s>>>5]|=128<<24-s%32;var i=u.floor(n/4294967296);var o=n;e[(s+64>>>9<<4)+15]=(i<<8|i>>>24)&16711935|(i<<24|i>>>8)&4278255360;e[(s+64>>>9<<4)+14]=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360;t.sigBytes=(e.length+1)*4;this._process();var r=this._hash;var a=r.words;for(var c=0;c<4;c++){var l=a[c];a[c]=(l<<8|l>>>24)&16711935|(l<<24|l>>>8)&4278255360}return r},clone:function(){var t=i.clone.call(this);t._hash=this._hash.clone();return t}});function C(t,e,n,s,i,o,r){var a=t+(e&n|~e&s)+i+r;return(a<<o|a>>>32-o)+e}function L(t,e,n,s,i,o,r){var a=t+(e&s|n&~s)+i+r;return(a<<o|a>>>32-o)+e}function q(t,e,n,s,i,o,r){var a=t+(e^n^s)+i+r;return(a<<o|a>>>32-o)+e}function x(t,e,n,s,i,o,r){var a=t+(n^(e|~s))+i+r;return(a<<o|a>>>32-o)+e}return e.MD5=i._createHelper(a),e.HmacMD5=i._createHmacHelper(a),t.MD5}(H)}),y=/\s\s*/,_=(v=!1,t&&(m=!1,P=function(){},t=Object.defineProperty({},"once",{get:function(){return v=!0,m},set:function(t){m=t}}),n.addEventListener("test",P,t),n.removeEventListener("test",P,t)),v);function g(t){return Array.isArray(t)}function w(t){return"function"==typeof t}function b(t){return"object"===e(t)&&null!==t}var k=Object.prototype.hasOwnProperty;function A(t){if(!b(t))return!1;try{var e=t.constructor,n=e.prototype;return e&&n&&k.call(n,"isPrototypeOf")}catch(t){return!1}}var S=Object.assign||function(n){for(var t=arguments.length,e=new Array(1<t?t-1:0),s=1;s<t;s++)e[s-1]=arguments[s];return b(n)&&0<e.length&&e.forEach(function(e){b(e)&&Object.keys(e).forEach(function(t){n[t]=e[t]})}),n};function M(n,t,s,e){var i=3<arguments.length&&void 0!==e?e:{},o=s;t.trim().split(y).forEach(function(t){var e;_||(e=n.listeners)&&e[t]&&e[t][s]&&(o=e[t][s],delete e[t][s],0===Object.keys(e[t]).length&&delete e[t],0===Object.keys(e).length&&delete n.listeners),n.removeEventListener(t,o,i)})}function I(o,t,r,e){var a=3<arguments.length&&void 0!==e?e:{},c=r;t.trim().split(y).forEach(function(s){var t,i;a.once&&!_&&(t=o.listeners,c=function(){delete i[s][r],o.removeEventListener(s,c,a);for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];r.apply(o,e)},(i=void 0===t?{}:t)[s]||(i[s]={}),i[s][r]&&o.removeEventListener(s,i[s][r],a),i[s][r]=c,o.listeners=i),o.addEventListener(s,c,a)})}function C(t,e,n){var s;w(Event)&&w(CustomEvent)?s=new CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0}):(s=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,n),t.dispatchEvent(s)}function L(e,n){var s={};return b(e)?b(n)?(Object.keys(e).forEach(function(t){void 0!==n[t]&&k.call(n,t)?s[t]=n[t]:s[t]=e[t]}),s):S(s,e):s}function q(){var t=Math.random().toString(36).substr(2),t=j(t).toString();return"".concat(t.substr(0,8),"-").concat(t.substr(8,4),"-").concat(t.substr(12,4),"-").concat(t.substr(16,4),"-").concat(t.substr(20,12))}function x(t){return"".concat(h,"-").concat(t)}var n={bind:function(){var t=this.element,e=this.options;w(e.onReady)&&I(t,a,e.onReady),w(e.onClose)&&I(t,c,e.onClose),w(e.onPaymentCreate)&&I(t,l,e.onPaymentCreate),w(e.onPaymentSuccess)&&I(t,u,e.onPaymentSuccess),w(e.onPaymentFail)&&I(t,d,e.onPaymentFail)},unbind:function(){var t=this.element,e=this.options;w(e.onReady)&&M(t,a,e.onReady),w(e.onClose)&&M(t,c,e.onClose),w(e.onPaymentCreate)&&M(t,l,e.onPaymentCreate),w(e.onPaymentSuccess)&&M(t,u,e.onPaymentSuccess),w(e.onPaymentFail)&&M(t,d,e.onPaymentFail)}},B=f(function(t,e){function o(t,e,n){for(var s,i,o=0,r=(n=c.call(arguments,2)).length;o<r;o++)for(s in i=n[o])t&&!a.call(i,s)||(e[s]=i[s])}function n(){}var r,a,c,s,l,u,h,d,f,i,p,m,v,y,_,g,w,b;t.exports=(r=function(){},a=Object.prototype.hasOwnProperty,c=Array.prototype.slice,t=function(t,e,n,s){var i=this;"string"!=typeof t&&(s=n,n=e,e=t,t=null);"function"!=typeof e&&(s=n,n=e,e=function(){return i.apply(this,arguments)});return o(!1,e,i,s),e.prototype=function(t,e){var n;"function"==typeof Object.create?n=Object.create(t):(r.prototype=t,n=new r,r.prototype=null);e&&o(!0,n,e);return n}(i.prototype,n),(e.prototype.constructor=e).class_=t||i.class_,e.super_=i,e},n.class_="Nevis",n.super_=Object,n.extend=t,w=(t=n).extend(function(t,e,n){this.qrious=t,this.element=e,this.element.qrious=t,this.enabled=Boolean(n)},{draw:function(t){},getElement:function(){return this.enabled||(this.enabled=!0,this.render()),this.element},getModuleSize:function(t){var e=this.qrious,n=e.padding||0,e=Math.floor((e.size-2*n)/t.width);return Math.max(1,e)},getOffset:function(t){var e=this.qrious,n=e.padding;if(null!=n)return n;n=this.getModuleSize(t),e=Math.floor((e.size-n*t.width)/2);return Math.max(0,e)},render:function(t){this.enabled&&(this.resize(),this.reset(),this.draw(t))},reset:function(){},resize:function(){}}),s=w.extend({draw:function(t){var e,n,s=this.qrious,i=this.getModuleSize(t),o=this.getOffset(t),r=this.element.getContext("2d");for(r.fillStyle=s.foreground,r.globalAlpha=s.foregroundAlpha,e=0;e<t.width;e++)for(n=0;n<t.width;n++)t.buffer[n*t.width+e]&&r.fillRect(i*e+o,i*n+o,i,i)},reset:function(){var t=this.qrious,e=this.element.getContext("2d"),n=t.size;e.lineWidth=1,e.clearRect(0,0,n,n),e.fillStyle=t.background,e.globalAlpha=t.backgroundAlpha,e.fillRect(0,0,n,n)},resize:function(){var t=this.element;t.width=t.height=this.qrious.size}}),l=t.extend(null,{BLOCK:[0,11,15,19,23,27,31,16,18,20,22,24,26,28,20,22,24,24,26,28,28,22,24,24,26,26,28,28,24,24,26,26,26,28,28,24,26,26,26,28,28]}),u=t.extend(null,{BLOCKS:[1,0,19,7,1,0,16,10,1,0,13,13,1,0,9,17,1,0,34,10,1,0,28,16,1,0,22,22,1,0,16,28,1,0,55,15,1,0,44,26,2,0,17,18,2,0,13,22,1,0,80,20,2,0,32,18,2,0,24,26,4,0,9,16,1,0,108,26,2,0,43,24,2,2,15,18,2,2,11,22,2,0,68,18,4,0,27,16,4,0,19,24,4,0,15,28,2,0,78,20,4,0,31,18,2,4,14,18,4,1,13,26,2,0,97,24,2,2,38,22,4,2,18,22,4,2,14,26,2,0,116,30,3,2,36,22,4,4,16,20,4,4,12,24,2,2,68,18,4,1,43,26,6,2,19,24,6,2,15,28,4,0,81,20,1,4,50,30,4,4,22,28,3,8,12,24,2,2,92,24,6,2,36,22,4,6,20,26,7,4,14,28,4,0,107,26,8,1,37,22,8,4,20,24,12,4,11,22,3,1,115,30,4,5,40,24,11,5,16,20,11,5,12,24,5,1,87,22,5,5,41,24,5,7,24,30,11,7,12,24,5,1,98,24,7,3,45,28,15,2,19,24,3,13,15,30,1,5,107,28,10,1,46,28,1,15,22,28,2,17,14,28,5,1,120,30,9,4,43,26,17,1,22,28,2,19,14,28,3,4,113,28,3,11,44,26,17,4,21,26,9,16,13,26,3,5,107,28,3,13,41,26,15,5,24,30,15,10,15,28,4,4,116,28,17,0,42,26,17,6,22,28,19,6,16,30,2,7,111,28,17,0,46,28,7,16,24,30,34,0,13,24,4,5,121,30,4,14,47,28,11,14,24,30,16,14,15,30,6,4,117,30,6,14,45,28,11,16,24,30,30,2,16,30,8,4,106,26,8,13,47,28,7,22,24,30,22,13,15,30,10,2,114,28,19,4,46,28,28,6,22,28,33,4,16,30,8,4,122,30,22,3,45,28,8,26,23,30,12,28,15,30,3,10,117,30,3,23,45,28,4,31,24,30,11,31,15,30,7,7,116,30,21,7,45,28,1,37,23,30,19,26,15,30,5,10,115,30,19,10,47,28,15,25,24,30,23,25,15,30,13,3,115,30,2,29,46,28,42,1,24,30,23,28,15,30,17,0,115,30,10,23,46,28,10,35,24,30,19,35,15,30,17,1,115,30,14,21,46,28,29,19,24,30,11,46,15,30,13,6,115,30,14,23,46,28,44,7,24,30,59,1,16,30,12,7,121,30,12,26,47,28,39,14,24,30,22,41,15,30,6,14,121,30,6,34,47,28,46,10,24,30,2,64,15,30,17,4,122,30,29,14,46,28,49,10,24,30,24,46,15,30,4,18,122,30,13,32,46,28,48,14,24,30,42,32,15,30,20,4,117,30,40,7,47,28,43,22,24,30,10,67,15,30,19,6,118,30,18,31,47,28,34,34,24,30,20,61,15,30],FINAL_FORMAT:[30660,29427,32170,30877,26159,25368,27713,26998,21522,20773,24188,23371,17913,16590,20375,19104,13663,12392,16177,14854,9396,8579,11994,11245,5769,5054,7399,6608,1890,597,3340,2107],LEVELS:{L:1,M:2,Q:3,H:4}}),h=t.extend(null,{EXPONENT:[1,2,4,8,16,32,64,128,29,58,116,232,205,135,19,38,76,152,45,90,180,117,234,201,143,3,6,12,24,48,96,192,157,39,78,156,37,74,148,53,106,212,181,119,238,193,159,35,70,140,5,10,20,40,80,160,93,186,105,210,185,111,222,161,95,190,97,194,153,47,94,188,101,202,137,15,30,60,120,240,253,231,211,187,107,214,177,127,254,225,223,163,91,182,113,226,217,175,67,134,17,34,68,136,13,26,52,104,208,189,103,206,129,31,62,124,248,237,199,147,59,118,236,197,151,51,102,204,133,23,46,92,184,109,218,169,79,158,33,66,132,21,42,84,168,77,154,41,82,164,85,170,73,146,57,114,228,213,183,115,230,209,191,99,198,145,63,126,252,229,215,179,123,246,241,255,227,219,171,75,150,49,98,196,149,55,110,220,165,87,174,65,130,25,50,100,200,141,7,14,28,56,112,224,221,167,83,166,81,162,89,178,121,242,249,239,195,155,43,86,172,69,138,9,18,36,72,144,61,122,244,245,247,243,251,235,203,139,11,22,44,88,176,125,250,233,207,131,27,54,108,216,173,71,142,0],LOG:[255,0,1,25,2,50,26,198,3,223,51,238,27,104,199,75,4,100,224,14,52,141,239,129,28,193,105,248,200,8,76,113,5,138,101,47,225,36,15,33,53,147,142,218,240,18,130,69,29,181,194,125,106,39,249,185,201,154,9,120,77,228,114,166,6,191,139,98,102,221,48,253,226,152,37,179,16,145,34,136,54,208,148,206,143,150,219,189,241,210,19,92,131,56,70,64,30,66,182,163,195,72,126,110,107,58,40,84,250,133,186,61,202,94,155,159,10,21,121,43,78,212,229,172,115,243,167,87,7,112,192,247,140,128,99,13,103,74,222,237,49,197,254,24,227,165,153,119,38,184,180,124,17,68,146,217,35,32,137,46,55,63,209,91,149,188,207,205,144,135,151,178,220,252,190,97,242,86,211,171,20,42,93,158,132,60,57,83,71,109,65,162,31,45,67,216,183,123,164,118,196,23,73,236,127,12,111,246,108,161,59,82,41,157,85,170,251,96,134,177,187,204,62,90,203,89,95,176,156,169,160,81,11,245,22,235,122,117,44,215,79,174,213,233,230,231,173,232,116,214,244,234,168,80,88,175]}),d=t.extend(null,{BLOCK:[3220,1468,2713,1235,3062,1890,2119,1549,2344,2936,1117,2583,1330,2470,1667,2249,2028,3780,481,4011,142,3098,831,3445,592,2517,1776,2234,1951,2827,1070,2660,1345,3177]}),f=t.extend(function(t){var e,n,s,i,o,r=t.value.length;for(this._badness=[],this._level=u.LEVELS[t.level],this._polynomial=[],this._value=t.value,this._version=0,this._stringBuffer=[];this._version<40&&(this._version++,s=4*(this._level-1)+16*(this._version-1),i=u.BLOCKS[s++],o=u.BLOCKS[s++],e=u.BLOCKS[s++],n=u.BLOCKS[s],!(r<=e*(i+o)+o-3+(this._version<=9))););this._dataBlock=e,this._eccBlock=n,this._neccBlock1=i,this._neccBlock2=o;t=this.width=17+4*this._version;this.buffer=f._createArray(t*t),this._ecc=f._createArray(e+(e+n)*(i+o)+o),this._mask=f._createArray((t*(1+t)+1)/2),this._insertFinders(),this._insertAlignments(),this.buffer[8+t*(t-8)]=1,this._insertTimingGap(),this._reverseMask(),this._insertTimingRowAndColumn(),this._insertVersion(),this._syncMask(),this._convertBitStream(r),this._calculatePolynomial(),this._appendEccToData(),this._interleaveBlocks(),this._pack(),this._finish()},{_addAlignment:function(t,e){var n,s=this.buffer,i=this.width;for(s[t+i*e]=1,n=-2;n<2;n++)s[t+n+i*(e-2)]=1,s[t-2+i*(e+n+1)]=1,s[t+2+i*(e+n)]=1,s[t+n+1+i*(e+2)]=1;for(n=0;n<2;n++)this._setMask(t-1,e+n),this._setMask(t+1,e-n),this._setMask(t-n,e-1),this._setMask(t+n,e+1)},_appendData:function(t,e,n,s){for(var i,o,r=this._polynomial,a=this._stringBuffer,c=0;c<s;c++)a[n+c]=0;for(c=0;c<e;c++){if(255!==(i=h.LOG[a[t+c]^a[n]]))for(o=1;o<s;o++)a[n+o-1]=a[n+o]^h.EXPONENT[f._modN(i+r[s-o])];else for(o=n;o<n+s;o++)a[o]=a[o+1];a[n+s-1]=255===i?0:h.EXPONENT[f._modN(i+r[0])]}},_appendEccToData:function(){for(var t=0,e=this._dataBlock,n=this._calculateMaxLength(),s=this._eccBlock,i=0;i<this._neccBlock1;i++)this._appendData(t,e,n,s),t+=e,n+=s;for(i=0;i<this._neccBlock2;i++)this._appendData(t,e+1,n,s),t+=e+1,n+=s},_applyMask:function(t){var e,n,s,i,o=this.buffer,r=this.width;switch(t){case 0:for(i=0;i<r;i++)for(s=0;s<r;s++)s+i&1||this._isMasked(s,i)||(o[s+i*r]^=1);break;case 1:for(i=0;i<r;i++)for(s=0;s<r;s++)1&i||this._isMasked(s,i)||(o[s+i*r]^=1);break;case 2:for(i=0;i<r;i++)for(s=e=0;s<r;s++,e++)(e=3===e?0:e)||this._isMasked(s,i)||(o[s+i*r]^=1);break;case 3:for(i=n=0;i<r;i++,n++)for(e=n=3===n?0:n,s=0;s<r;s++,e++)(e=3===e?0:e)||this._isMasked(s,i)||(o[s+i*r]^=1);break;case 4:for(i=0;i<r;i++)for(n=i>>1&1,s=e=0;s<r;s++,e++)3===e&&(e=0,n=!n),n||this._isMasked(s,i)||(o[s+i*r]^=1);break;case 5:for(i=n=0;i<r;i++,n++)for(3===n&&(n=0),s=e=0;s<r;s++,e++)(s&i&1)+!(!(e=3===e?0:e)|!n)||this._isMasked(s,i)||(o[s+i*r]^=1);break;case 6:for(i=n=0;i<r;i++,n++)for(3===n&&(n=0),s=e=0;s<r;s++,e++)(s&i&1)+((e=3===e?0:e)&&e===n)&1||this._isMasked(s,i)||(o[s+i*r]^=1);break;case 7:for(i=n=0;i<r;i++,n++)for(3===n&&(n=0),s=e=0;s<r;s++,e++)((e=3===e?0:e)&&e===n)+(s+i&1)&1||this._isMasked(s,i)||(o[s+i*r]^=1)}},_calculateMaxLength:function(){return this._dataBlock*(this._neccBlock1+this._neccBlock2)+this._neccBlock2},_calculatePolynomial:function(){var t,e,n=this._eccBlock,s=this._polynomial;for(s[0]=1,t=0;t<n;t++){for(s[t+1]=1,e=t;0<e;e--)s[e]=s[e]?s[e-1]^h.EXPONENT[f._modN(h.LOG[s[e]]+t)]:s[e-1];s[0]=h.EXPONENT[f._modN(h.LOG[s[0]]+t)]}for(t=0;t<=n;t++)s[t]=h.LOG[s[t]]},_checkBadness:function(){for(var t,e,n,s,i=0,o=this._badness,r=this.buffer,a=this.width,c=0;c<a-1;c++)for(s=0;s<a-1;s++)(r[s+a*c]&&r[s+1+a*c]&&r[s+a*(c+1)]&&r[s+1+a*(c+1)]||!(r[s+a*c]||r[s+1+a*c]||r[s+a*(c+1)]||r[s+1+a*(c+1)]))&&(i+=f.N2);var l=0;for(c=0;c<a;c++){for(s=t=o[n=0]=0;s<a;s++)t===(e=r[s+a*c])?o[n]++:o[++n]=1,l+=(t=e)?1:-1;i+=this._getBadness(n)}for(var u=0,h=(h=l=l<0?-l:l)+(h<<2)<<1;a*a<h;)h-=a*a,u++;for(i+=u*f.N4,s=0;s<a;s++){for(c=t=o[n=0]=0;c<a;c++)t===(e=r[s+a*c])?o[n]++:o[++n]=1,t=e;i+=this._getBadness(n)}return i},_convertBitStream:function(t){for(var e,n=this._ecc,s=this._version,i=0;i<t;i++)n[i]=this._value.charCodeAt(i);var o=this._stringBuffer=n.slice(),r=this._calculateMaxLength(),a=(r-2<=t&&(t=r-2,9<s&&t--),t);if(9<s){for(o[a+2]=0,o[a+3]=0;a--;)e=o[a],o[a+3]|=255&e<<4,o[a+2]=e>>4;o[2]|=255&t<<4,o[1]=t>>4,o[0]=64|t>>12}else{for(o[a+1]=0,o[a+2]=0;a--;)e=o[a],o[a+2]|=255&e<<4,o[a+1]=e>>4;o[1]|=255&t<<4,o[0]=64|t>>4}for(a=t+3-(s<10);a<r;)o[a++]=236,o[a++]=17},_getBadness:function(t){for(var e=0,n=this._badness,s=0;s<=t;s++)5<=n[s]&&(e+=f.N1+n[s]-5);for(s=3;s<t-1;s+=2)n[s-2]===n[s+2]&&n[s+2]===n[s-1]&&n[s-1]===n[s+1]&&3*n[s-1]===n[s]&&(0===n[s-3]||t<s+3||3*n[s-3]>=4*n[s]||3*n[s+3]>=4*n[s])&&(e+=f.N3);return e},_finish:function(){this._stringBuffer=this.buffer.slice();for(var t,e=0,n=3e4,s=0;s<8&&(this._applyMask(s),(t=this._checkBadness())<n&&(n=t,e=s),7!==e);s++)this.buffer=this._stringBuffer.slice();e!==s&&this._applyMask(e);var n=u.FINAL_FORMAT[e+(this._level-1<<3)],i=this.buffer,o=this.width;for(s=0;s<8;s++,n>>=1)1&n&&(i[o-1-s+8*o]=1,s<6?i[8+o*s]=1:i[8+o*(s+1)]=1);for(s=0;s<7;s++,n>>=1)1&n&&(i[8+o*(o-7+s)]=1,s?i[6-s+8*o]=1:i[7+8*o]=1)},_interleaveBlocks:function(){for(var t,e=this._dataBlock,n=this._ecc,s=this._eccBlock,i=0,o=this._calculateMaxLength(),r=this._neccBlock1,a=this._neccBlock2,c=this._stringBuffer,l=0;l<e;l++){for(t=0;t<r;t++)n[i++]=c[l+t*e];for(t=0;t<a;t++)n[i++]=c[r*e+l+t*(e+1)]}for(t=0;t<a;t++)n[i++]=c[r*e+l+t*(e+1)];for(l=0;l<s;l++)for(t=0;t<r+a;t++)n[i++]=c[o+l+t*s];this._stringBuffer=n},_insertAlignments:function(){var t,e,n,s=this._version,i=this.width;if(1<s)for(t=l.BLOCK[s],n=i-7;;){for(e=i-7;t-3<e&&(this._addAlignment(e,n),!(e<t));)e-=t;if(n<=t+9)break;n-=t,this._addAlignment(6,n),this._addAlignment(n,6)}},_insertFinders:function(){for(var t,e,n,s=this.buffer,i=this.width,o=0;o<3;o++){for(n=t=0,s[(n=2===o?i-7:n)+3+i*((t=1===o?i-7:t)+3)]=1,e=0;e<6;e++)s[n+e+i*t]=1,s[n+i*(t+e+1)]=1,s[n+6+i*(t+e)]=1,s[n+e+1+i*(t+6)]=1;for(e=1;e<5;e++)this._setMask(n+e,t+1),this._setMask(n+1,t+e+1),this._setMask(n+5,t+e),this._setMask(n+e+1,t+5);for(e=2;e<4;e++)s[n+e+i*(t+2)]=1,s[n+2+i*(t+e+1)]=1,s[n+4+i*(t+e)]=1,s[n+e+1+i*(t+4)]=1}},_insertTimingGap:function(){for(var t,e=this.width,n=0;n<7;n++)this._setMask(7,n),this._setMask(e-8,n),this._setMask(7,n+e-7);for(t=0;t<8;t++)this._setMask(t,7),this._setMask(t+e-8,7),this._setMask(t,e-8)},_insertTimingRowAndColumn:function(){for(var t=this.buffer,e=this.width,n=0;n<e-14;n++)1&n?(this._setMask(8+n,6),this._setMask(6,8+n)):(t[8+n+6*e]=1,t[6+e*(8+n)]=1)},_insertVersion:function(){var t,e,n,s,i=this.buffer,o=this._version,r=this.width;if(6<o)for(t=d.BLOCK[o-7],e=17,n=0;n<6;n++)for(s=0;s<3;s++,e--)1&(11<e?o>>e-12:t>>e)?(i[5-n+r*(2-s+r-11)]=1,i[2-s+r-11+r*(5-n)]=1):(this._setMask(5-n,2-s+r-11),this._setMask(2-s+r-11,5-n))},_isMasked:function(t,e){t=f._getMaskBit(t,e);return 1===this._mask[t]},_pack:function(){for(var t,e,n=1,s=1,i=this.width,o=i-1,r=i-1,a=(this._dataBlock+this._eccBlock)*(this._neccBlock1+this._neccBlock2)+this._neccBlock2,c=0;c<a;c++)for(t=this._stringBuffer[c],e=0;e<8;e++,t<<=1)for(128&t&&(this.buffer[o+i*r]=1);s?o--:(o++,n?0!==r?r--:(n=!n,6===(o-=2)&&(o--,r=9)):r!==i-1?r++:(n=!n,6===(o-=2)&&(o--,r-=8))),s=!s,this._isMasked(o,r););},_reverseMask:function(){for(var t,e=this.width,n=0;n<9;n++)this._setMask(n,8);for(n=0;n<8;n++)this._setMask(n+e-8,8),this._setMask(8,n);for(t=0;t<7;t++)this._setMask(8,t+e-7)},_setMask:function(t,e){t=f._getMaskBit(t,e);this._mask[t]=1},_syncMask:function(){for(var t,e=this.width,n=0;n<e;n++)for(t=0;t<=n;t++)this.buffer[t+e*n]&&this._setMask(t,n)}},{_createArray:function(t){for(var e=[],n=0;n<t;n++)e[n]=0;return e},_getMaskBit:function(t,e){var n;return e<t&&(n=t,t=e,e=n),n=e,n=((n+=e*e)>>1)+t},_modN:function(t){for(;255<=t;)t=((t-=255)>>8)+(255&t);return t},N1:3,N2:3,N3:40,N4:10}),i=f,p=w.extend({draw:function(){this.element.src=this.qrious.toDataURL()},reset:function(){this.element.src=""},resize:function(){var t=this.element;t.width=t.height=this.qrious.size}}),w=t.extend(function(t,e,n,s){this.name=t,this.modifiable=Boolean(e),this.defaultValue=n,this._valueTransformer=s},{transform:function(t){var e=this._valueTransformer;return"function"==typeof e?e(t,this):t}}),m=t.extend(null,{abs:function(t){return null!=t?Math.abs(t):null},hasOwn:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},noop:function(){},toUpperCase:function(t){return null!=t?t.toUpperCase():null}}),v=t.extend(function(t){this.options={},t.forEach(function(t){this.options[t.name]=t},this)},{exists:function(t){return null!=this.options[t]},get:function(t,e){return v._get(this.options[t],e)},getAll:function(t){var e,n=this.options,s={};for(e in n)m.hasOwn(n,e)&&(s[e]=v._get(n[e],t));return s},init:function(t,e,n){var s,i;for(s in"function"!=typeof n&&(n=m.noop),this.options)m.hasOwn(this.options,s)&&(i=this.options[s],v._set(i,i.defaultValue,e),v._createAccessor(i,e,n));this._setAll(t,e,!0)},set:function(t,e,n){return this._set(t,e,n)},setAll:function(t,e){return this._setAll(t,e)},_set:function(t,e,n,s){var i=this.options[t];if(!i)throw new Error("Invalid option: "+t);if(i.modifiable||s)return v._set(i,e,n);throw new Error("Option cannot be modified: "+t)},_setAll:function(t,e,n){if(!t)return!1;var s,i=!1;for(s in t)m.hasOwn(t,s)&&this._set(s,t[s],e,n)&&(i=!0);return i}},{_createAccessor:function(e,n,s){var t={get:function(){return v._get(e,n)}};e.modifiable&&(t.set=function(t){v._set(e,t,n)&&s(t,e)}),Object.defineProperty(n,e.name,t)},_get:function(t,e){return e["_"+t.name]},_set:function(t,e,n){var s="_"+t.name,i=n[s],e=t.transform(null!=e?e:t.defaultValue);return(n[s]=e)!==i}}),g=v,b=t.extend(function(){this._services={}},{getService:function(t){var e=this._services[t];if(e)return e;throw new Error("Service is not being managed with name: "+t)},setService:function(t,e){if(this._services[t])throw new Error("Service is already managed with name: "+t);e&&(this._services[t]=e)}}),y=new g([new w("background",!0,"white"),new w("backgroundAlpha",!0,1,m.abs),new w("element"),new w("foreground",!0,"black"),new w("foregroundAlpha",!0,1,m.abs),new w("level",!0,"L",m.toUpperCase),new w("mime",!0,"image/png"),new w("padding",!0,null,m.abs),new w("size",!0,100,m.abs),new w("value",!0,"")]),_=new b,g=t.extend(function(t){y.init(t,this,this.update.bind(this));var t=y.get("element",this),e=_.getService("element"),n=t&&e.isCanvas(t)?t:e.createCanvas(),e=t&&e.isImage(t)?t:e.createImage();this._canvasRenderer=new s(this,n,!0),this._imageRenderer=new p(this,e,e===t),this.update()},{get:function(){return y.getAll(this)},set:function(t){y.setAll(t,this)&&this.update()},toDataURL:function(t){return this.canvas.toDataURL(t||this.mime)},update:function(){var t=new i({level:this.level,value:this.value});this._canvasRenderer.render(t),this._imageRenderer.render(t)}},{use:function(t){_.setService(t.getName(),t)}}),Object.defineProperties(g.prototype,{canvas:{get:function(){return this._canvasRenderer.getElement()}},image:{get:function(){return this._imageRenderer.getElement()}}}),w=g,b=t.extend({getName:function(){}}).extend({createCanvas:function(){},createImage:function(){},getName:function(){return"element"},isCanvas:function(t){},isImage:function(t){}}).extend({createCanvas:function(){return document.createElement("canvas")},createImage:function(){return document.createElement("img")},isCanvas:function(t){return t instanceof HTMLCanvasElement},isImage:function(t){return t instanceof HTMLImageElement}}),w.use(new b),w)}),E='<div class="'.concat(x("content"),'">  <div class="').concat(x("step")," ").concat(x("quote"),'">    <div class="').concat(x("step-content"),'">      <div class="').concat(x("selector"),'">        <div class="').concat(x("selector__title"),'">Queto Asset</div>        <div class="').concat(x("selector__content"),'">          <div class="').concat(x("selector__control"),'">\n            <div class="').concat(x("selector__selected"),'"></div>            <div class="').concat(x("selector__icon"),'"></div>          </div>          <ul class="').concat(x("selector__list"),'"></ul>        </div>      </div>      <div class="').concat(x("input"),'">        <div class="').concat(x("input__title"),'">Quote Amount</div>        <div class="').concat(x("input__content"),'">          <div class="').concat(x("input__control"),'">            <input type="number" name="quoteAmount" placeholder="Please enter the amount" />\n          </div>          <div class="').concat(x("input__right"),'">USDT</div>        </div>      </div>      <div class="').concat(x("step-error"),'"></div>    </div>    <div class="').concat(x("step-footer"),'">      <button>Next</button>    </div>  </div>  <div class="').concat(x("step")," ").concat(x("payment"),'">    <div class="').concat(x("step-title"),'"></div>    <div class="').concat(x("step-content"),'">      <div class="').concat(x("selector"),'">        <div class="').concat(x("selector__title"),'">Payment Asset</div>        <div class="').concat(x("selector__content"),'">          <div class="').concat(x("selector__control"),'">\n            <div class="').concat(x("selector__selected"),'"></div>            <div class="').concat(x("selector__icon"),'"></div>          </div>          <ul class="').concat(x("selector__list"),'"></ul>        </div>      </div>      <div class="').concat(x("radio"),'">        <div class="').concat(x("radio__title"),'">Payment Wallet</div>        <div class="').concat(x("radio__content"),'">          <label>            <input name="paymentMethod" type="radio" value="mixin" />            <span>Mixin Wallet</span>          </label>          <label>            <input name="paymentMethod" type="radio" value="chain" />            <span>On-chain Transfer</span>          </label>        </div>      </div>      <div class="').concat(x("step-error"),'"></div>    </div>    <div class="').concat(x("step-footer"),'">      <button>Confirm</button>\n    </div>  </div>  <div class="').concat(x("step")," ").concat(x("info"),'">    <div class="').concat(x("step-title"),'"></div>    <div class="').concat(x("step-content"),'">      <div class="qrious"></div>      <p class="countdown"></p>    </div>    <div class="').concat(x("step-footer"),'">      <button>Pay with Wallet</button>    </div>  </div>  <div class="').concat(x("step")," ").concat(x("result"),'">    <div class="').concat(x("step-content"),'">      <div class="').concat(x("result__success"),'">        <svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg" class="icon-success"><path d="M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M34.5548098,16.4485711 C33.9612228,15.8504763 32.9988282,15.8504763 32.4052412,16.4485711 L32.4052412,16.4485711 L21.413757,27.5805811 L21.413757,27.5805811 L21.4034642,27.590855 C21.0097542,27.9781674 20.3766105,27.9729811 19.9892981,27.5792711 L19.9892981,27.5792711 L15.5947588,23.1121428 C15.0011718,22.514048 14.0387772,22.514048 13.4451902,23.1121428 C12.8516033,23.7102376 12.8516033,24.6799409 13.4451902,25.2780357 L13.4451902,25.2780357 L19.6260786,31.5514289 C20.2196656,32.1495237 21.1820602,32.1495237 21.7756472,31.5514289 L21.7756472,31.5514289 L34.5548098,18.614464 C35.1483967,18.0163692 35.1483967,17.0466659 34.5548098,16.4485711 Z"></path></svg>        <span>Thank you! Your payment is finished.</span>      </div>      <div class="').concat(x("result__failed"),'">        <svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg" class="icon-error"><path d="M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M32.57818,15.42182 C32.0157534,14.8593933 31.1038797,14.8593933 30.541453,15.42182 L30.541453,15.42182 L24.0006789,21.9625941 L17.458547,15.42182 C16.8961203,14.8593933 15.9842466,14.8593933 15.42182,15.42182 C14.8593933,15.9842466 14.8593933,16.8961203 15.42182,17.458547 L15.42182,17.458547 L21.9639519,23.9993211 L15.42182,30.541453 C14.8593933,31.1038797 14.8593933,32.0157534 15.42182,32.57818 C15.9842466,33.1406067 16.8961203,33.1406067 17.458547,32.57818 L17.458547,32.57818 L24.0006789,26.0360481 L30.541453,32.57818 C31.1038797,33.1406067 32.0157534,33.1406067 32.57818,32.57818 C33.1406067,32.0157534 33.1406067,31.1038797 32.57818,30.541453 L32.57818,30.541453 L26.0374059,23.9993211 L32.57818,17.458547 C33.1406067,16.8961203 33.1406067,15.9842466 32.57818,15.42182 Z"></path></svg>        <span>Payment is invalid, please try again.</span>      </div>    </div>    <div class="').concat(x("step-footer"),'">\n      <button>Pay it again</button>    </div>  </div></div>'),z='<div class="'.concat(x("header"),'"><img src="').concat("https://mixpay.me/plugins/logo.svg",'" class="').concat(x("header__logo"),'" /><i class="').concat(x("header__close"),'"></i></div>').concat(E),P={render:function(){var t=this.options,e=this.element,n=(e.setAttribute("class",t.isModal?"".concat(h," ").concat(h,"-modal"):h),t.isModal&&t.hasMask&&((n=document.createElement("div")).setAttribute("class","".concat(h,"-mask")),e.appendChild(n)),document.createElement("div")),i=(n.setAttribute("class","".concat(h,"-container")),n.innerHTML=t.isModal?z:E,e.appendChild(n),this.$quoteSelectorToggle=this.element.querySelector(".".concat(h,"-quote .").concat(h,"-selector__control")),this.$quoteSelectorSelected=this.element.querySelector(".".concat(h,"-quote .").concat(h,"-selector__selected")),this.$quoteSelectorList=this.element.querySelector(".".concat(h,"-quote .").concat(h,"-selector__list")),this.$quoteInput=this.element.querySelector(".".concat(h,"-input input")),this.$quoteInputUnit=this.element.querySelector(".".concat(h,"-input__right")),this.$quoteInputErr=this.element.querySelector(".".concat(h,"-quote .").concat(h,"-step-error")),this.$quoteBtn=this.element.querySelector(".".concat(h,"-quote button")),this.$paymentSelectorToggle=this.element.querySelector(".".concat(h,"-payment .").concat(h,"-selector__control")),this.$paymentSelectorSelected=this.element.querySelector(".".concat(h,"-payment .").concat(h,"-selector__selected")),this.$paymentSelectorList=this.element.querySelector(".".concat(h,"-payment .").concat(h,"-selector__list")),this.$paymentMethods=this.element.querySelectorAll(".".concat(h,"-radio input")),this.$paymentBtn=this.element.querySelector(".".concat(h,"-payment button")),this.$paymentErr=this.element.querySelector(".".concat(h,"-payment .").concat(h,"-step-error")),this.$countdown=this.element.querySelector(".countdown"),this.$payInfoBtn=this.element.querySelector(".".concat(h,"-info button")),this.$resultBtn=this.element.querySelector(".".concat(h,"-result button")),this);t.isModal&&(i.element.querySelector(".".concat(h,"-header__close")).onclick=function(){i.hide()}),i.$quoteSelectorList.innerHTML=this.quoteAssets.map(function(t){return'<li data-id="'.concat(t.assetId,'" /><img src="').concat(t.iconUrl,'" /><span>').concat(t.symbol,"</span></li>")}).join(""),i.$paymentSelectorList.innerHTML=this.paymentAssets.map(function(t){return'<li data-id="'.concat(t.assetId,'" /><img src="').concat(t.iconUrl,'" /><span>').concat(t.symbol,"</span>").concat(t.network?"<em>".concat(t.network,"</em>"):"")}).join(""),i.$quoteSelectorToggle.onclick=function(){var t=i.payConfig,e=i.payInfo,t=t.quoteAssetId,e=e.quoteAsset;t&&e&&e.assetId===t||(i.$quoteSelectorList.classList.contains("show")?i.$quoteSelectorList.classList.remove("show"):i.$quoteSelectorList.classList.add("show"))},i.$quoteSelectorList.onclick=function(t){var e=t.target||t.srcElement;if(e!==this){for(;"LI"!==String(e.tagName).toUpperCase();)e=e.parentNode;i.setQuoteAsset(e.dataset.id),this.classList.remove("show")}},i.$quoteInput.oninput=function(t){/[0-9]/.test(t.data)&&i.setQuoteAmount(t.target.value),null===t.data&&i.setQuoteAmount(t.target.value)},i.$quoteBtn.onclick=function(){var t=i.payInfo.quoteAsset,e=t.maxQuoteAmount,t=t.minQuoteAmount,n=i.payInfo.quoteAmount,s="";(+e<+n||+n<+t)&&(s="<span>Out of range ".concat(t,"-").concat(e,"</span>")),(i.$quoteInputErr.innerHTML=s)||i.renderStep(1)},i.$paymentSelectorToggle.onclick=function(){i.$paymentSelectorList.classList.contains("show")?i.$paymentSelectorList.classList.remove("show"):i.$paymentSelectorList.classList.add("show")},i.$paymentSelectorList.onclick=function(t){var e=t.target||t.srcElement;if(e!==this){for(;"LI"!==String(e.tagName).toUpperCase();)e=e.parentNode;i.setPaymentAsset(e.dataset.id),this.classList.remove("show")}},i.$paymentBtn.onclick=function(){var e=this;this.isSubmitting||(this.isSubmitting=!0,i.createPayment().then(function(){e.isSubmitting=!1,i.renderStep(2)}).catch(function(t){e.isSubmitting=!1,i.$paymentErr.innerHTML="<span>".concat(t.message,"</span>")}))},[].forEach.call(i.$paymentMethods,function(t){t.onclick=function(){i.setPaymentMethod(this.value)}})},renderStep:function(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};switch(n=String(n)){case"0":this.renderQuote();break;case"1":this.renderPayment();break;case"2":this.renderPayInfo(),this.startCountdown(),this.startPollResult();break;case"3":this.renderResult(t.status)}var e=this.element.querySelectorAll(".".concat(h,"-step"));[].forEach.call(e,function(t,e){t.style.display=String(e)===n?"block":"none"})},renderQuote:function(){var t=this.payConfig,e=t.quoteAssetId,n=t.quoteAmount,s=t.paymentMethod,t=t.paymentAssetId;this.setQuoteAsset(e),this.setQuoteAmount(n),this.setPaymentMethod(s||"mixin"),this.setPaymentAsset(t),this.$quoteInputErr.innerHTML="",this.element.querySelector(".".concat(h,"-quote  .").concat(h,"-selector__icon")).style.opacity=e?0:1},renderPayment:function(){var t=this.payInfo,e=t.quoteAsset,t=t.quoteAmount;this.element.querySelector(".".concat(h,"-payment .").concat(h,"-step-title")).innerHTML='<img src="'.concat(e.iconUrl,'" /><strong>').concat(t," ").concat(e.symbol,"</strong>"),this.$paymentErr.innerHTML=""},renderPayInfo:function(){var t=this.element,e=this.paymentInfo,n=this.paymentAssets,s=e.paymentAssetId,i=e.paymentAmount,o=e.isChain,r=e.destination,a=e.tag,c=e.traceId,l=e.memo,u=e.recipient,e=n.find(function(t){return t.assetId===s}),n=t.querySelector(".qrious"),t=t.querySelector(".".concat(h,"-info .").concat(h,"-step-title"));n.innerHTML="",t.innerHTML='<img src="'.concat(e.iconUrl,'" /><strong>').concat(i," ").concat(e.symbol,"</strong>"),o?((t=document.createElement("div")).setAttribute("class","qrious-item"),e=document.createElement("canvas"),(o=document.createElement("span")).setAttribute("data-id","address"),o.innerHTML="Address: <br/><em>".concat(r,'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><path d="M18.167 10h-6.375c-.783 0-1.417.597-1.417 1.333v6c0 .737.634 1.334 1.417 1.334h6.375c.782 0 1.416-.597 1.416-1.334v-6c0-.736-.634-1.333-1.416-1.333z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/><path d="M7.542 14h-.709a1.46 1.46 0 01-1.001-.39 1.295 1.295 0 01-.415-.943v-6c0-.354.149-.693.415-.943a1.46 1.46 0 011.001-.39h6.375c.376 0 .736.14 1.002.39s.415.589.415.943v.666" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/></svg></em>'),new B({element:e,value:r,size:600,level:"H"}),t.appendChild(o),t.appendChild(e),n.appendChild(t),a&&((r=document.createElement("div")).setAttribute("class","qrious-item"),o=document.createElement("canvas"),(e=document.createElement("span")).setAttribute("data-id","memo"),e.innerHTML="Memo: <br/><em>".concat(a,'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><path d="M18.167 10h-6.375c-.783 0-1.417.597-1.417 1.333v6c0 .737.634 1.334 1.417 1.334h6.375c.782 0 1.416-.597 1.416-1.334v-6c0-.736-.634-1.333-1.416-1.333z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/><path d="M7.542 14h-.709a1.46 1.46 0 01-1.001-.39 1.295 1.295 0 01-.415-.943v-6c0-.354.149-.693.415-.943a1.46 1.46 0 011.001-.39h6.375c.376 0 .736.14 1.002.39s.415.589.415.943v.666" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/></svg></em>'),new B({element:o,value:a,size:600,level:"H"}),r.appendChild(e),r.appendChild(o),n.appendChild(r)),[].forEach.call(n.querySelectorAll("em"),function(t){t.onclick=function(){var t=this;clearTimeout(this.timeout),function(t){var e,n=document.createElement("textarea");n.value=t,n.setAttribute("readonly",""),n.style.cssText="position:absolute;left:-9999px",document.body.appendChild(n),navigator.userAgent.match(/ipad|ipod|iphone/i)?((t=document.createRange()).selectNodeContents(n),(e=window.getSelection()).removeAllRanges(),e.addRange(t),n.setSelectionRange(0,999999)):n.select();try{document.execCommand("copy"),n.remove()}catch(t){return n.remove(),0}return 1}(this.textContent)&&this.classList.add("copy-success"),this.timeout=setTimeout(function(){t.classList.remove("copy-success")},2e3)}}),this.$payInfoBtn.innerText="Pay with any wallet",this.$payInfoBtn.style.display="none"):((t=document.createElement("div")).setAttribute("class","qrious-item"),a=document.createElement("canvas"),new B({element:a,value:"https://mixin.one/pay?recipient=".concat(u,"&asset=").concat(s,"&amount=").concat(i,"&trace=").concat(c,"&memo=").concat(l),size:600,level:"H"}),t.appendChild(a),n.appendChild(t),this.$payInfoBtn.innerText="Pay with Mixin Wallet",this.$payInfoBtn.style.display=R?"block":"none",this.$payInfoBtn.onclick=function(){window.location.href="https://mixin.one/pay?recipient=".concat(u,"&asset=").concat(s,"&amount=").concat(i,"&trace=").concat(c,"&memo=").concat(l)})},renderResult:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"success",e=this.element,n=e.querySelector(".".concat(h,"-result__success")),s=e.querySelector(".".concat(h,"-result__failed")),e=e.querySelector(".".concat(h,"-result button")),i=this;"success"===t&&(n.style.display="flex",s.style.display="none",e.style.display="none"),"failed"===t&&(n.style.display="none",s.style.display="flex",e.style.display="block",e.onclick=function(){i.show()})},startCountdown:function(){function t(){var t=n.expire-Math.ceil((new Date).getTime()/1e3);0<=t?e.$countdown.innerHTML="Please complete the payment within <strong>".concat(t,"s</strong>"):(clearInterval(e.countdownInterval),clearInterval(e.pollResultInterval),e.getPaymentInfo().then(function(t){"unpaid"!==t?(C(s,u),e.renderStep(3,{status:"success"})):(C(s,d),e.renderStep(3,{status:"failed"}))}).catch(function(t){C(s,d,t),e.renderStep(3,{status:"failed"})}))}var e=this,n=(clearInterval(this.countdownInterval),this.paymentInfo),s=this.element;this.countdownInterval=setInterval(t,1e3),t()},startPollResult:function(){var e=this;clearInterval(this.pollResultInterval),this.pollResultInterval=setInterval(function(){e.getPaymentInfo().then(function(t){"unpaid"!==t&&(clearInterval(e.pollResultInterval),clearInterval(e.countdownInterval),e.renderStep(3,{status:"success"}))}).catch(function(){})},2e3)},setQuoteAsset:function(e){var t=this.quoteAssets.find(function(t){return t.assetId===e})||this.quoteAssets[0];this.payInfo.quoteAsset=t,this.$quoteSelectorSelected.innerHTML='<img src="'.concat(t.iconUrl,'" /><span>').concat(t.symbol,"</span>"),this.$quoteInputUnit.innerHTML=t.symbol,this.$quoteInputErr.innerHTML=""},setQuoteAmount:function(t){var e=this.payInfo.quoteAsset.decimalDigit,t=String(t).replace(/[^0-9.]/g,""),n=(t="."===t?"0.":t).length-1,n=(t="."===t[n-1]&&t.indexOf(".")!==n-1?t.slice(0,n-2):t).split(".");e<=0?t=$(n,1)[0]:void 0!==n[1]&&(t="".concat(n[0],".").concat(n[1].slice(0,e))),this.payInfo.quoteAmount=t,this.$quoteInput.value=t},setPaymentAsset:function(e){var t=this.paymentAssets.find(function(t){return t.assetId===e})||this.paymentAssets[0];this.payInfo.paymentAsset=t,this.$paymentSelectorSelected.innerHTML='<img src="'.concat(t.iconUrl,'" /><span>').concat(t.symbol,"</span>").concat(t.network?"<em>".concat(t.network,"</em>"):"")},setPaymentMethod:function(t){"mixin"===t&&(this.payInfo.isChain=!1,this.$paymentMethods[0].checked=!0,this.$paymentMethods[1].checked=!1),"chain"===t&&(this.payInfo.isChain=!0,this.$paymentMethods[0].checked=!1,this.$paymentMethods[1].checked=!0)}},U=o.apiUrl,T=function(t){return new Promise(function(n,s){var i=new XMLHttpRequest;i.open("GET",t.startsWith("/")?U+t:t,!0),i.ontimeout=function(){s(new Error("Request timeout, please try it again later."))},i.onerror=function(t){s(t)},i.onreadystatechange=function(){if(4===i.readyState)if(200<=i.status&&i.status<300||304===i.status)try{var t=JSON.parse(i.responseText);n(t)}catch(t){n(i.responseText)}else try{var e=JSON.parse(i.responseText);s(e)}catch(t){s(new Error(i.responseText))}},i.send()})},D=function(t,e){return new Promise(function(n,s){var i=new XMLHttpRequest;i.open("POST",t.startsWith("/")?U+t:t,!0),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.ontimeout=function(){s(new Error("Request timeout, please try it again later."))},i.onerror=function(t){s(t)},i.onreadystatechange=function(){if(4===i.readyState)if(200<=i.status&&i.status<300||304===i.status)try{var t=JSON.parse(i.responseText);n(t)}catch(t){n(i.responseText)}else try{var e=JSON.parse(i.responseText);s(e)}catch(t){s(new Error(i.responseText))}},i.send(JSON.stringify(e))})},O={getQuoteAssets:function(){return T("/setting/quote_assets")},getPaymentAssets:function(){return T("/setting/payment_assets")},getSettlementAssets:function(){return T("/setting/settlement_assets")},getPaymentResult:function(t){return T("/payments_result?traceId=".concat(t))},createPayment:function(t){return D("/payments",t)}},t=function(){function i(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=this,s=i;if(!(n instanceof s))throw new TypeError("Cannot call a class as a function");this.options=S({},o,A(e)&&e),this.ready=!1,this.quoteAssets=[],this.paymentAssets=[];n=document.createElement("div");(t=t&&t instanceof HTMLElement?t:document.body).appendChild(n),this.element=n,this.payConfig=L(r,this.options),this.payInfo={},this.paymentInfo={},this.isSubmitting=!1,this.countdownInterval=null,this.pollResultInterval=null,this.init()}var t,e,n;return t=i,n=[{key:"setDefaults",value:function(t){S(o,A(t)&&t)}}],(e=[{key:"init",value:function(){this.bind(),this.load()}},{key:"load",value:function(){var e=this,t=this.element,n=[];this.quoteAssets.length||n.push(i.getQuoteAssets().then(function(t){e.quoteAssets=g(t.data)?t.data:[]})),this.paymentAssets.length||n.push(i.getPaymentAssets().then(function(t){e.paymentAssets=g(t.data)?t.data:[]})),Promise.all(n).then(function(){e.ready=!0,e.build(),C(t,a)}).catch(function(){setTimeout(function(){e.load()},1e3)})}},{key:"build",value:function(){this.render()}},{key:"destroy",value:function(){var t,e;this.ready&&(this.ready=!1,(e=(t=this.element)&&t.parentNode)&&e.removeChild(t),this.unbind())}},{key:"pay",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.payConfig=L(L(r,this.options),A(e)&&e),this.ready?this.show():I(this.element,a,function(){t.show()},{once:!0})}},{key:"show",value:function(){var t=this.element,e=this.payConfig;this.renderStep(0),e.quoteAssetId&&0<e.quoteAmount&&this.renderStep(1),t.classList.contains("show")||t.classList.add("show")}},{key:"hide",value:function(){clearInterval(this.countdownInterval),clearInterval(this.pollResultInterval),C(this.element,c);var t=this.element;t.classList.contains("show")&&t.classList.remove("show")}},{key:"createPayment",value:function(){var e=this,t=this.payInfo,n=this.payConfig,s=this.element,n=L(n,{quoteAssetId:t.quoteAsset.assetId,quoteAmount:t.quoteAmount,paymentAssetId:t.paymentAsset.assetId,note:t.note,isChain:t.isChain});return n.traceId||(n.traceId=q()),n.clientId||(n.clientId=q()),O.createPayment(n).then(function(t){t=t.data;e.paymentInfo={clientId:t.clientId,destination:t.destination,tag:t.tag,expire:t.expire,isChain:t.isChain,quoteAssetId:t.quoteAssetId,quoteAmount:t.quoteAmount,paymentAssetId:t.paymentAssetId,paymentAmount:t.paymentAmount,memo:t.memo,recipient:t.recipient,traceId:t.traceId},C(s,l,e.paymentInfo)}).catch(function(t){return Promise.reject(t)})}},{key:"getPaymentInfo",value:function(){return O.getPaymentResult(this.paymentInfo.traceId).then(function(t){t=t.data;return Promise.resolve(t.status)}).catch(function(t){return Promise.reject(t)})}}])&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();return S(t.prototype,n,P),S(t,O,{newUUID:q}),t});